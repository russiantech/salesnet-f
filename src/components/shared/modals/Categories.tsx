
const Categories1 = () => {
  return (
    <>
      <div className="offcanvas offcanvas-start d-flex h-100 " id="SideCategory" tabIndex="-1" aria-labelledby="offcanvasLeftLabel"
        style={{ paddingLeft: 0, overflowX: 'auto', display: 'flex', flexDirection: 'column', minWidth: '300px', maxWidth: '100%' }}>

        <div className="offcanvas-header border-bottom">
          <h5 className="offcanvas-title" id="offcanvasLeftLabel">Browse Salessnet.</h5>
          <button className="btn-close" type="button" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>

        <div className="offcanvas-body py-3 py-lg-0" style={{ paddingLeft: 0, overflowX: 'auto', display: 'flex', flexDirection: 'column' }}>
          <header className="navbar navbar-expand-lg d-block z-fixed p-0" data-sticky-navbar="{&quot;offset&quot;: 500}">
            <div className="container px-0 px-lg-1">
              <div className="row">
                <div className="col-lg-6 col-12">
                  <div className="navbar-nav">
                    <div className="dropdown w-100">
                      <ul className="dropdown-menu dropdown-menu-static w-100  rounded-bottom-4 py-1 p-lg-1 show" data-bs-popper="static">

                        <li className="dropend position-static">
                          <div className="position-relative rounded pt-2 pb-1 px-lg-2" data-bs-toggle="dropdown"
                            data-bs-trigger="hover">
                            <a className="dropdown-item fw-medium stretched-link d-none d-lg-flex" href="shop-catalog-electronics.html">
                              <i className="ci-computer fs-xl opacity-60 pe-1 me-2"></i>
                              <span className="text-truncate">Computers &amp; Accessories</span>
                              <i className="ci-chevron-right fs-base ms-auto me-n1"></i>
                            </a>
                            <div className="dropdown-item fw-medium text-wrap stretched-link d-lg-none">
                              <i className="ci-computer fs-xl opacity-60 pe-1 me-2"></i>
                              Computers &amp; Accessories
                              <i className="ci-chevron-down fs-base ms-auto me-n1"></i>
                            </div>
                          </div>
                          <div className="dropdown-menu rounded-4 p-4"
                            style={{ "top": "1rem", "height": "calc(100% - .1875rem)", "--cz-dropdownpacer": ".3125rem", "animation": "none" }}>
                            <div className="d-flex flex-column flex-lg-row h-100 gap-4">
                              <div style={{ "minWidth": "194px" }}>
                                <div className="d-flex w-100">
                                  <a className="animate-underline animate-target d-inline h6 text-dark-emphasis text-decoration-none text-truncate"
                                    href="shop-catalog-electronics.html">Computers</a>
                                </div>
                                <ul className="nav flex-column gap-2 mt-n2">
                                  <li className="d-flex w-100 pt-1">
                                    <a className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0"
                                      href="shop-catalog-electronics.html">Networking Products (NAS)</a>
                                  </li>
                                  <li className="d-flex w-100 pt-1">
                                    <a className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0"
                                      href="shop-catalog-electronics.html">Single Board Computers</a>
                                  </li>
                                </ul>
                              </div>
                              <div style={{ "minWidth": "194px" }}>
                                <div className="d-flex w-100">
                                  <a className="animate-underline animate-target d-inline h6 text-dark-emphasis text-decoration-none text-truncate"
                                    href="shop-catalog-electronics.html">Accessories</a>
                                </div>
                                <ul className="nav flex-column gap-2 mt-n2">
                                  <li className="d-flex w-100 pt-1">
                                    <a className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0"
                                      href="shop-catalog-electronics.html">Monitors</a>
                                  </li>
                                  <li className="d-flex w-100 pt-1">
                                    <a className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0"
                                      href="shop-catalog-electronics.html">Security Locks</a>
                                  </li>
                                </ul>
                              </div>
                              <div className="d-none d-lg-block">
                                <div className="d-none d-xl-block" style={{ "width": "284px" }}></div>
                                <div className="d-xl-none" style={{ "width": "240px" }}></div>
                                <div className="position-relative d-flex flex-column justify-content-center h-100 bg-body-secondary rounded-5 py-4 px-3">
                                  <div className="text-center px-2">
                                    <span className="badge bg-danger bg-opacity-10 text-danger fs-sm rounded-pill mb-2">Save up to
                                      $400</span>
                                    <div className="fs-sm text-light-emphasis mb-2">Starts from <del>$1,599.00</del> $1,399.00</div>
                                    <div className="h2 mb-4">Surface Laptop Studio</div>
                                  </div>
                                  <img src="/assets/img/mega-menu/electronics/01.png" width="252" alt="Surface Laptop Studio" />
                                  <div className="text-center mt-4">
                                    <a className="btn btn-sm btn-primary stretched-link" href="shop-catalog-electronics.html">Shop now</a>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </li>

                        <li className="dropend position-static">
                          <div className="position-relative rounded pt-2 pb-1 px-lg-2" data-bs-toggle="dropdown"
                            data-bs-trigger="hover">
                            <a className="dropdown-item fw-medium stretched-link d-none d-lg-flex" href="shop-catalog-electronics.html">
                              <i className="ci-computer fs-xl opacity-60 pe-1 me-2"></i>
                              <span className="text-truncate">Computers &amp; Accessories</span>
                              <i className="ci-chevron-right fs-base ms-auto me-n1"></i>
                            </a>
                            <div className="dropdown-item fw-medium text-wrap stretched-link d-lg-none">
                              <i className="ci-computer fs-xl opacity-60 pe-1 me-2"></i>
                              Computers &amp; Accessories
                              <i className="ci-chevron-down fs-base ms-auto me-n1"></i>
                            </div>
                          </div>
                          <div className="dropdown-menu rounded-4 p-4"
                            style={{ "top": "1rem", "--cz-dropdownpacer": ".3125rem", "animation": "none" }}>
                            <div className="d-flex flex-column flex-lg-row h-100 gap-4">
                              <div style={{ "minWidth": "194px" }}>
                                <div className="d-flex w-100">
                                  <a className="animate-underline animate-target d-inline h6 text-dark-emphasis text-decoration-none text-truncate"
                                    href="shop-catalog-electronics.html">Computers</a>
                                </div>
                                <ul className="nav flex-column gap-2 mt-n2">
                                  <li className="d-flex w-100 pt-1">
                                    <a className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0"
                                      href="shop-catalog-electronics.html">Networking Products (NAS)</a>
                                  </li>
                                  <li className="d-flex w-100 pt-1">
                                    <a className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0"
                                      href="shop-catalog-electronics.html">Single Board Computers</a>
                                  </li>
                                </ul>
                              </div>
                              <div style={{ "minWidth": "194px" }}>
                                <div className="d-flex w-100">
                                  <a className="animate-underline animate-target d-inline h6 text-dark-emphasis text-decoration-none text-truncate"
                                    href="shop-catalog-electronics.html">Accessories</a>
                                </div>
                                <ul className="nav flex-column gap-2 mt-n2">
                                  <li className="d-flex w-100 pt-1">
                                    <a className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0"
                                      href="shop-catalog-electronics.html">Monitors</a>
                                  </li>
                                  <li className="d-flex w-100 pt-1">
                                    <a className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0"
                                      href="shop-catalog-electronics.html">Security Locks</a>
                                  </li>
                                </ul>
                              </div>
                              <div className="d-none d-lg-block">
                                <div className="d-none d-xl-block" style={{ "width": "284px" }}></div>
                                <div className="d-xl-none" style={{ "width": "240px" }}></div>
                                <div className="position-relative d-flex flex-column justify-content-center h-100 bg-body-secondary rounded-5 py-4 px-3">
                                  <div className="text-center px-2">
                                    <span className="badge bg-danger bg-opacity-10 text-danger fs-sm rounded-pill mb-2">Save up to
                                      $400</span>
                                    <div className="fs-sm text-light-emphasis mb-2">Starts from <del>$1,599.00</del> $1,399.00</div>
                                    <div className="h2 mb-4">Surface Laptop Studio</div>
                                  </div>
                                  <img src="/assets/img/mega-menu/electronics/01.png" width="252" alt="Surface Laptop Studio" />
                                  <div className="text-center mt-4">
                                    <a className="btn btn-sm btn-primary stretched-link" href="shop-catalog-electronics.html">Shop now</a>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </li>

                        <li className="dropend position-static">
                          <div className="position-relative rounded pb-1 px-lg-2" tabindex="0" data-bs-toggle="dropdown" data-bs-trigger="hover" aria-expanded="false">
                            <a className="dropdown-item fw-medium stretched-link d-none d-lg-flex" href="shop-catalog-electronics.html">
                              <i className="ci-powerbank fs-xl opacity-60 pe-1 me-2"></i>
                              <span className="text-truncate">Powerbanks</span>
                              <i className="ci-chevron-right fs-base ms-auto me-n1"></i>
                            </a>
                            <div className="dropdown-item fw-medium stretched-link d-lg-none">
                              <i className="ci-powerbank fs-xl opacity-60 pe-1 me-2"></i>
                              Powerbanks
                              <i className="ci-chevron-down fs-base ms-auto me-n1"></i>
                            </div>
                          </div>
                          <div className="dropdown-menu rounded-4 p-4" style={{ "top": "1rem", "height": "calc(100% - .1875rem)", "-czDropdownSpacer": ".3125rem", "animation": "none" }}>
                            <div className="d-flex flex-column flex-lg-row h-100 gap-4">
                              <div style={{ "minWidth": "194px" }}>
                                <div className="d-flex w-100">
                                  <a className="animate-underline animate-target d-inline h6 text-dark-emphasis text-decoration-none text-truncate" href="shop-catalog-electronics.html">Powerbanks</a>
                                </div>
                                <ul className="nav flex-column gap-2 mt-n2">
                                  <li className="d-flex w-100 pt-1">
                                    <a className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0" href="shop-catalog-electronics.html">Fast Charging</a>
                                  </li>
                                  <li className="d-flex w-100 pt-1">
                                    <a className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0" href="shop-catalog-electronics.html">Built In Cable</a>
                                  </li>

                                </ul>
                              </div>
                              <div className="d-none d-lg-block">
                                <div className="d-none d-xl-block" style={{ "width": "284px" }}></div>
                                <div className="d-xl-none" style={{ "width": "240px" }}></div>
                                <div className="position-relative d-flex flex-column justify-content-center h-100 bg-body-secondary rounded-5 py-4 px-3">
                                  <div className="text-center px-2">
                                    <div className="fs-sm text-light-emphasis mb-2">Save up to <span className="fw-semibold">$50</span> on our</div>
                                    <div className="h2 mb-4">Powerbank Deals</div>
                                  </div>
                                  <img src="/assets/img/mega-menu/electronics/10.png" width="252" alt="Powerbank" />
                                  <div className="text-center mt-4">
                                    <a className="btn btn-sm btn-primary stretched-link" href="shop-catalog-electronics.html">Shop now</a>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </li>
                        <li className="dropend position-static">
                          <div className="position-relative rounded pb-1 px-lg-2" tabindex="0" data-bs-toggle="dropdown" data-bs-trigger="hover" aria-expanded="false">
                            <a className="dropdown-item fw-medium stretched-link d-none d-lg-flex" href="shop-catalog-electronics.html">
                              <i className="ci-hard-drive-2 fs-xl opacity-60 pe-1 me-2"></i>
                              <span className="text-truncate">HDD/SSD Data Storage</span>
                              <i className="ci-chevron-right fs-base ms-auto me-n1"></i>
                            </a>
                            <div className="dropdown-item fw-medium stretched-link d-lg-none">
                              <i className="ci-hard-drive-2 fs-xl opacity-60 pe-1 me-2"></i>
                              HDD/SSD Data Storage
                              <i className="ci-chevron-down fs-base ms-auto me-n1"></i>
                            </div>
                          </div>
                          <div className="dropdown-menu rounded-4 p-4" style={{ "top": "1rem", "height": "calc(100% - .1875rem)", "-czDropdownSpacer": ".3125rem", "animation": "none" }}>
                            <div className="d-flex flex-column flex-lg-row h-100 gap-4">
                              <div style={{ "minWidth": "194px" }}>
                                <div className="d-flex w-100">
                                  <a className="animate-underline animate-target d-inline h6 text-dark-emphasis text-decoration-none text-truncate" href="shop-catalog-electronics.html">Data Storage</a>
                                </div>
                                <ul className="nav flex-column gap-2 mt-n2">
                                  <li className="d-flex w-100 pt-1">
                                    <a className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0" href="shop-catalog-electronics.html">External Hard Drives</a>
                                  </li>
                                  <li className="d-flex w-100 pt-1">
                                    <a className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0" href="shop-catalog-electronics.html">External SSD</a>
                                  </li>
                                  <li className="d-flex w-100 pt-1">
                                    <a className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0" href="shop-catalog-electronics.html">External Zip Drives</a>
                                  </li>
                                </ul>
                              </div>
                              <div className="d-none d-lg-block">
                                <div className="d-none d-xl-block" style={{ "width": "284px" }}></div>
                                <div className="d-xl-none" style={{ "width": "240px" }}></div>
                                <div className="position-relative d-flex flex-column justify-content-center h-100 bg-body-secondary rounded-5 py-4 px-3">
                                  <div className="text-center px-2">
                                    <span className="badge bg-danger bg-opacity-10 text-danger fs-sm rounded-pill mb-2">Save up to $100</span>
                                    <div className="fs-sm text-light-emphasis mb-2">Starts from $89.99</div>
                                    <div className="h2 mb-4">Samsung SSD Deals</div>
                                  </div>
                                  <img src="/assets/img/mega-menu/electronics/11.png" width="252" alt="SSD" />
                                  <div className="text-center mt-4">
                                    <a className="btn btn-sm btn-primary stretched-link" href="shop-catalog-electronics.html">Shop now</a>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </li>
                        <li className="dropend position-static">
                          <div className="position-relative rounded pb-2 px-lg-2" tabindex="0" data-bs-toggle="dropdown" data-bs-trigger="hover" aria-expanded="false">
                            <a className="dropdown-item fw-medium stretched-link d-none d-lg-flex" href="shop-catalog-electronics.html">
                              <i className="ci-game fs-xl opacity-60 pe-1 me-2"></i>
                              <span className="text-truncate">Video Games</span>
                              <i className="ci-chevron-right fs-base ms-auto me-n1"></i>
                            </a>
                            <div className="dropdown-item fw-medium stretched-link d-lg-none">
                              <i className="ci-game fs-xl opacity-60 pe-1 me-2"></i>
                              Video Games
                              <i className="ci-chevron-down fs-base ms-auto me-n1"></i>
                            </div>
                          </div>
                          <div className="dropdown-menu rounded-4 p-4" style={{ "top": "1rem", "height": "calc(100% - .1875rem)", "-czDropdownSpacer": ".3125rem", "animation": "none" }}>
                            <div className="d-flex flex-column flex-lg-row h-100 gap-lg-4">
                              <div style={{ "minWidth": "194px" }}>
                                <div className="d-flex w-100">
                                  <a className="animate-underline animate-target d-inline h6 text-dark-emphasis text-decoration-none text-truncate" href="shop-catalog-electronics.html">Games &amp; Hardware</a>
                                </div>
                                <ul className="nav flex-column gap-2 mt-n2">
                                  <li className="d-flex w-100 pt-1">
                                    <a className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0" href="shop-catalog-electronics.html">Video Games</a>
                                  </li>
                                  <li className="d-flex w-100 pt-1">
                                    <a className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0" href="shop-catalog-electronics.html">PlayStation 5</a>
                                  </li>
                                </ul>
                              </div>
                              <div style={{ "minWidth": "194px" }}>
                                <ul className="nav flex-column gap-2 mt-2 mt-lg-0">
                                  <li className="d-flex w-100 pt-1">
                                    <a className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0" href="shop-catalog-electronics.html">Mac</a>
                                  </li>
                                  <li className="d-flex w-100 pt-1">
                                    <a className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0" href="shop-catalog-electronics.html">PlayStation Vita</a>
                                  </li>

                                </ul>
                              </div>
                              <div className="d-none d-lg-block">
                                <div className="d-none d-xl-block" style={{ "width": "284px" }}></div>
                                <div className="d-xl-none" style={{ "width": "240px" }}></div>
                                <div className="position-relative d-flex flex-column justify-content-center h-100 bg-body-secondary rounded-5 py-4 px-3">
                                  <div className="text-center px-2">
                                    <span className="badge bg-danger bg-opacity-10 text-danger fs-sm rounded-pill mb-2">Save $100</span>
                                    <div className="fs-sm text-light-emphasis mb-2">Starts from <del>$599.00</del> $499.00</div>
                                    <div className="h2 mb-4">Xbox Series X</div>
                                  </div>
                                  <img src="/assets/img/mega-menu/electronics/12.png" width="252" alt="Xbox" />
                                  <div className="text-center mt-4">
                                    <a className="btn btn-sm btn-primary stretched-link" href="shop-catalog-electronics.html">Shop now</a>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </li>

                      </ul>

                    </div>
                  </div>
                </div>
              </div>
            </div>
          </header>
        </div>
      </div>
    </>
  );
}

import { useEffect, useState } from 'react';
import { CategoriesAxiosService } from '../../../services/net/CategoriesAxiosService';
import LoadingSpinner from '../LoadingSpinner';
// import './Categories.css'
import { Link } from 'react-router-dom';

const Categories2 = () => {
  const [categories, setCategories] = useState([]);

  // Fetch categories from the backend
  const fetchCategories = async () => {
    try {
      // const response = await fetch('/api/categories'); // Adjust the endpoint as needed
      const response = await CategoriesAxiosService.getCategories({
                          include_products: false
                      });
                      
      const data = await response.data.categories;
      setCategories(data);
    } catch (error) {
      console.error('Error fetching categories:', error);
    }
  };

  useEffect(() => {
    fetchCategories();
  }, []);

  const renderCategories = (categories) => {
    return categories.map((category) => (
      <li key={category.id} className="dropend position-static">
        <div className="position-relative rounded pt-2 pb-1 px-lg-2" data-bs-toggle="dropdown" data-bs-trigger="hover">
          <a className="dropdown-item fw-medium stretched-link d-none d-lg-flex" href={category.link}>
            <i className={`ci-${category.icon} fs-xl opacity-60 pe-1 me-2`}></i>
            <span className="text-truncate">{category.name}</span>
            <i className="ci-chevron-right fs-base ms-auto me-n1"></i>
          </a>
          <div className="dropdown-item fw-medium text-wrap stretched-link d-lg-none">
            <i className={`ci-${category.icon} fs-xl opacity-60 pe-1 me-2`}></i>
            {category.name}
            <i className="ci-chevron-down fs-base ms-auto me-n1"></i>
          </div>
        </div>
        {category.children && category.children.length > 0 && (
          <div className="dropdown-menu rounded-4 p-4" style={{ top: '1rem', animation: 'none' }}>
            <ul className="nav flex-column gap-2 mt-n2">
              {renderCategories(category.children)}
            </ul>
          </div>
        )}
      </li>
    ));
  };

  return (
    <div className="offcanvas offcanvas-start d-flex h-100" id="SideCategory" tabIndex="-1" aria-labelledby="offcanvasLeftLabel"
      style={{ paddingLeft: 0, overflowX: 'auto', display: 'flex', flexDirection: 'column', minWidth: '300px', maxWidth: '100%' }}>
      <div className="offcanvas-header border-bottom">
        <h5 className="offcanvas-title" id="offcanvasLeftLabel">Browse Salessnet.</h5>
        <button className="btn-close" type="button" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div className="offcanvas-body py-3 py-lg-0" style={{ paddingLeft: 0, overflowX: 'auto', display: 'flex', flexDirection: 'column' }}>
        <header className="navbar navbar-expand-lg d-block z-fixed p-0" data-sticky-navbar="{&quot;offset&quot;: 500}">
          <div className="container px-0 px-lg-1">
            <div className="row">
              <div className="col-lg-6 col-12">
                <div className="navbar-nav">
                  <ul className="dropdown-menu dropdown-menu-static w-100 rounded-bottom-4 py-1 p-lg-1 show" data-bs-popper="static">
                    {renderCategories(categories)}
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </header>
      </div>
    </div>
  );
}



const Categories3 = () => {
  const [categories, setCategories] = useState([]);
  const [loading, setLoading] = useState(true);

  // Fetch categories from the backend
  const fetchCategories = async () => {
    try {
      const response = await CategoriesAxiosService.getCategories({
        include_products: false
      });
      const data = response.data.categories;
      console.log('catadata',  data)
      setCategories(data);
    } catch (error) {
      console.error('Error fetching categories:', error);
    } finally {
      setLoading(false); // Stop loading after fetching
    }
  };

  useEffect(() => {
    fetchCategories();
  }, []);

  const renderCategories = (categories) => {
    return categories.map((category) => {
      const hasChildren = Array.isArray(category.children) && category.children.length > 0;
  
      return (
        <li key={category.id} className="dropend position-static">
          <div
            className="position-relative rounded pt-2 pb-1 px-lg-2"
            data-bs-toggle="dropdown"
            data-bs-trigger="hover"
            onClick={(e) => {
              if (!hasChildren) {
                e.stopPropagation(); // Prevent closing if no children
              }
            }}
          >
            <a className="dropdown-item fw-medium stretched-link d-none d-lg-flex" href={`/${category.slug}`}>
              <span className="text-truncate">{category.name}</span>
              {hasChildren && (
                <i className="ci-chevron-right fs-base ms-auto me-n1"></i>
              )}
            </a>
            <div className="dropdown-item fw-medium text-wrap stretched-link d-lg-none">
              {category.name}
              {hasChildren && (
                <i className="ci-chevron-down fs-base ms-auto me-n1"></i>
              )}
            </div>
          </div>
          {hasChildren && (
            <div className="dropdown-menu rounded-4 p-4" style={{ top: '1rem', animation: 'none' }}>
              <ul className="nav flex-column gap-2 mt-n2">
                {renderCategories(category.children || [])} {/* Default to empty array */}
              </ul>
            </div>
          )}
        </li>
      );
    });
  };
  
  return (
    <div className="offcanvas offcanvas-start d-flex h-100" id="SideCategory" tabIndex="-1" aria-labelledby="offcanvasLeftLabel"
      style={{ paddingLeft: 0, overflowX: 'auto', display: 'flex', flexDirection: 'column', minWidth: '300px', maxWidth: '100%' }}>
      <div className="offcanvas-header border-bottom">
        <h5 className="offcanvas-title" id="offcanvasLeftLabel">Browse Salessnet.</h5>
        <button className="btn-close" type="button" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div className="offcanvas-body py-3 py-lg-0" style={{ paddingLeft: 0, overflowX: 'auto', display: 'flex', flexDirection: 'column' }}>
        <header className="navbar navbar-expand-lg d-block z-fixed p-0" data-sticky-navbar="{&quot;offset&quot;: 500}">
          <div className="container px-0 px-lg-1">
            <div className="row">
              <div className="col-lg-6 col-12">
                <div className="navbar-nav">
                  {loading ? (
                    <div className="text-center">
                      <LoadingSpinner />
                    </div>
                  ) : (
                    <ul className="dropdown-menu dropdown-menu-static w-100 rounded-bottom-4 py-1 p-lg-1 show" data-bs-popper="static">
                      {renderCategories(categories)}
                    </ul>
                  )}
                </div>
              </div>
            </div>
          </div>
        </header>
      </div>
    </div>
  );
}

// 
const Categories4 = () => {
  const [categories, setCategories] = useState([]);
  const [loading, setLoading] = useState(true);

  // Fetch categories from the backend
  const fetchCategories = async () => {
    try {
      const response = await CategoriesAxiosService.getCategories({
        include_products: false
      });
      const data = response.data.categories;
      console.log('catadata', data)
      setCategories(data);
    } catch (error) {
      console.error('Error fetching categories:', error);
    } finally {
      setLoading(false); // Stop loading after fetching
    }
  };

  useEffect(() => {
    fetchCategories();
  }, []);

  const renderCategories = (categories, renderedIds = new Set()) => {
    return categories.map((category) => {
      // Skip rendering if this category has already been rendered
      if (renderedIds.has(category.id)) {
        return null;
      }

      const hasChildren = Array.isArray(category.children) && category.children.length > 0;
      renderedIds.add(category.id); // Mark this category as rendered

      return (
        <li key={category.id} className="dropend position-static">
          <div
            className="position-relative rounded pt-2 pb-1 px-lg-2"
            data-bs-toggle="dropdown"
            data-bs-trigger="hover"
            onClick={(e) => {
              if (!hasChildren) {
                e.stopPropagation(); // Prevent closing if no children
              }
            }}
          >
            <a className="dropdown-item fw-medium stretched-link d-none d-lg-flex" href={`/${category.slug}`}>
              <span className="text-truncate">{category.name}</span>
              {hasChildren && (
                <i className="ci-chevron-right fs-base ms-auto me-n1"></i>
              )}
            </a>
            <div className="dropdown-item fw-medium text-wrap stretched-link d-lg-none">
              {category.name}
              {hasChildren && (
                <i className="ci-chevron-down fs-base ms-auto me-n1"></i>
              )}
            </div>
          </div>
          {hasChildren && (
            <div className="dropdown-menu rounded-4 p-4" style={{ top: '1rem', animation: 'none' }}>
              <ul className="nav flex-column gap-2 mt-n2">
                {renderCategories(category.children || [], renderedIds)} {/* Pass the renderedIds Set */}
              </ul>
            </div>
          )}
        </li>
      );
    });
  };

  return (
    <div className="offcanvas offcanvas-start d-flex h-100" id="SideCategory" tabIndex="-1" aria-labelledby="offcanvasLeftLabel"
      style={{ paddingLeft: 0, overflowX: 'auto', display: 'flex', flexDirection: 'column', minWidth: '300px', maxWidth: '100%' }}>
      <div className="offcanvas-header border-bottom">
        <h5 className="offcanvas-title" id="offcanvasLeftLabel">Browse Salessnet.</h5>
        <button className="btn-close" type="button" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div className="offcanvas-body py-3 py-lg-0" style={{ paddingLeft: 0, overflowX: 'auto', display: 'flex', flexDirection: 'column' }}>
        <header className="navbar navbar-expand-lg d-block z-fixed p-0" data-sticky-navbar="{&quot;offset&quot;: 500}">
          <div className="container px-0 px-lg-1">
            <div className="row">
              <div className="col-lg-6 col-12">
                <div className="navbar-nav">
                  {loading ? (
                    <div className="text-center">
                      <LoadingSpinner />
                    </div>
                  ) : (
                    <ul className="dropdown-menu dropdown-menu-static w-100 rounded-bottom-4 py-1 p-lg-1 show" data-bs-popper="static">
                      {renderCategories(categories)}
                    </ul>
                  )}
                </div>
              </div>
            </div>
          </div>
        </header>
      </div>
    </div>
  );
}

// import React, { useEffect, useState } from 'react';
// import CategoriesAxiosService from './CategoriesAxiosService'; // Adjust the import based on your project structure
// import LoadingSpinner from './LoadingSpinner'; // Adjust the import based on your project structure

const Categories5 = () => {
  const [categories, setCategories] = useState([]);
  const [loading, setLoading] = useState(true);

  // Fetch categories from the backend
  const fetchCategories = async () => {
    try {
      const response = await CategoriesAxiosService.getCategories({ include_products: false });
      const data = response.data.categories;
      console.log('Categories data:', data);
      setCategories(data);
    } catch (error) {
      console.error('Error fetching categories:', error);
    } finally {
      setLoading(false); // Stop loading after fetching
    }
  };

  useEffect(() => {
    fetchCategories();
  }, []);

  const renderCategories = (categories, renderedIds = new Set()) => {
    return categories.map((category) => {
      // Skip rendering if this category has already been rendered
      if (renderedIds.has(category.id)) {
        return null;
      }

      const hasChildren = Array.isArray(category.children) && category.children.length > 0;
      // renderedIds.add(category.id); // Mark this category as rendered

      return (
        <li key={category.id} className="dropend position-static">
          <div
            className="position-relative rounded pt-2 pb-1 px-lg-2"
            data-bs-toggle="dropdown"
            data-bs-trigger="hover"
            onClick={(e) => {
              if (!hasChildren) {
                e.stopPropagation(); // Prevent closing if no children
              }
            }}
          >
            <a className="dropdown-item fw-medium stretched-link d-none d-lg-flex" href={`/${category.slug}`}>
              <span className="text-truncate">{category.name}</span>
              {hasChildren && <i className="ci-chevron-right fs-base ms-auto me-n1"></i>}
            </a>
            <div className="dropdown-item fw-medium text-wrap stretched-link d-lg-none">
              {category.name}
              {hasChildren && <i className="ci-chevron-down fs-base ms-auto me-n1"></i>}
            </div>
          </div>
          {hasChildren && (
            <div className="dropdown-menu rounded-4 p-4" style={{ top: '1rem', animation: 'none' }}>
              <ul className="nav flex-column gap-2 mt-n2">
                {renderCategories(category.children, renderedIds)} {/* Pass the renderedIds Set */}
              </ul>
            </div>
          )}
        </li>
      );
    });
  };

  return (
    <div className="offcanvas offcanvas-start d-flex h-100" id="SideCategory" tabIndex="-1" aria-labelledby="offcanvasLeftLabel"
      style={{ paddingLeft: 0, overflowX: 'auto', display: 'flex', flexDirection: 'column', minWidth: '300px', maxWidth: '100%' }}>
      <div className="offcanvas-header border-bottom">
        <h5 className="offcanvas-title" id="offcanvasLeftLabel">Browse Salessnet.</h5>
        <button className="btn-close" type="button" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div className="offcanvas-body py-3 py-lg-0" style={{ paddingLeft: 0, overflowX: 'auto', display: 'flex', flexDirection: 'column' }}>
        <header className="navbar navbar-expand-lg d-block z-fixed p-0" data-sticky-navbar='{"offset": 500}'>
          <div className="container px-0 px-lg-1">
            <div className="row">
              <div className="col-lg-6 col-12">
                <div className="navbar-nav">
                  {loading ? (
                    <div className="text-center">
                      <LoadingSpinner />
                    </div>
                  ) : (
                    <ul className="dropdown-menu dropdown-menu-static w-100 rounded-bottom-4 py-1 p-lg-1 show" data-bs-popper="static">
                      {renderCategories(categories)}
                    </ul>
                  )}
                </div>
              </div>
            </div>
          </div>
        </header>
      </div>
    </div>
  );
}


const Categories6 = () => {
  const [categories, setCategories] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    const fetchCategories = async () => {
      try {
        const response = await CategoriesAxiosService.getCategories({
          include_products: false
        });
        // console.log('category-response--', response)
        setCategories(response.data.categories);
      } catch (err) {
        setError(err.message || 'Failed to fetch categories');
      } finally {
        setLoading(false);
      }
    };

    fetchCategories();
  }, []);

  // Group categories by parent (categories with children)
  console.log('category-response--', categories)
  // const parentCategories = categories.filter(cat => cat.children && cat.children.length > 0);
  const parentCategories = categories;
  console.log('parentCategories', parentCategories)
  // Get icon based on category name (you can customize this as needed)
  const getCategoryIcon = (categoryName) => {
    const icons = {
      'Services': 'ci-computer',
      'Home & Garden': 'ci-home',
      'Entertainment': 'ci-game',
      'Fashion & Accessories': 'ci-apparel',
      'Family': 'ci-heart',
      'Electronics': 'ci-powerbank',
      'Hobbies': 'ci-puzzle',
      'Classifieds': 'ci-tag',
      'Vehicles': 'ci-car',
      'Property': 'ci-building',
      'Apparrel': 'ci-apparel',
      'Office Supplies': 'ci-briefcase',
      'Free Stuffs': 'ci-gift'
    };
    
    return icons[categoryName] || 'ci-layers';
  };

  if (loading) {
    return <div className="text-center py-4">Loading categories...</div>;
  }

  if (error) {
    return <div className="text-center py-4 text-danger">Error: {error}</div>;
  }

  return (
    <>
      <div className="offcanvas offcanvas-start d-flex h-100" id="SideCategory" tabIndex="-1" aria-labelledby="offcanvasLeftLabel"
        style={{ paddingLeft: 0, overflowX: 'auto', display: 'flex', flexDirection: 'column', width:'800px', minWidth: '300px', maxWidth: '100%' }}>

        <div className="offcanvas-header border-bottom">
          <h5 className="offcanvas-title" id="offcanvasLeftLabel">Browse Salessnet.</h5>
          <button className="btn-close" type="button" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>

        <div className="offcanvas-body py-3 py-lg-0" style={{ paddingLeft: 0, overflowX: 'auto', display: 'flex', flexDirection: 'column' }}>
          <header className="navbar navbar-expand-lg d-block z-fixed p-0" data-sticky-navbar="{&quot;offset&quot;: 500}">
            <div className="container px-0 px-lg-1">
              <div className="row">
                <div className="col-lg-6 col-12">
                  <div className="navbar-nav">
                    <div className="dropdown w-100">
                      <ul className="dropdown-menu dropdown-menu-static w-100 rounded-bottom-4 py-1 p-lg-1 show" data-bs-popper="static">
                        {parentCategories.map((category) => (
                          <li className="dropend position-static" key={category.id}>
                            <div className="position-relative rounded pt-2 pb-1 px-lg-2" data-bs-toggle="dropdown"
                              data-bs-trigger="hover">
                              <a className="dropdown-item fw-medium stretched-link d-none d-lg-flex" href={`/categories/${category.slug}`}>
                                <i className={`${getCategoryIcon(category.name)} fs-xl opacity-60 pe-1 me-2`}></i>
                                <span className="text-truncate">{category.name}</span>
                                <i className="ci-chevron-right fs-base ms-auto me-n1"></i>
                              </a>
                              <div className="dropdown-item fw-medium text-wrap stretched-link d-lg-none">
                                <i className={`${getCategoryIcon(category.name)} fs-xl opacity-60 pe-1 me-2`}></i>
                                {category.name}
                                <i className="ci-chevron-down fs-base ms-auto me-n1"></i>
                              </div>
                            </div>
                            <div className="dropdown-menu rounded-4 p-4"
                              style={{ top: "1rem", height: "calc(100% - .1875rem)", "--cz-dropdownpacer": ".3125rem", animation: "none" }}>
                              <div className="d-flex flex-column flex-lg-row h-100 gap-4">
                                {/* Render child categories in columns */}
                                {category.children && category.children.length > 0 && (
                                  <>
                                    <div style={{ minWidth: "194px" }}>
                                      <div className="d-flex w-100">
                                        <a className="animate-underline animate-target d-inline h6 text-dark-emphasis text-decoration-none text-truncate"
                                          href={`/categories/${category.slug}`}>{category.name}</a>
                                      </div>
                                      <ul className="nav flex-column gap-2 mt-n2">
                                        {category.children.map((child) => (
                                          <li className="d-flex w-100 pt-1" key={child.id}>
                                            <a className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0"
                                              href={`/categories/${child.slug || child.id}`}>
                                              {child.name}
                                            </a>
                                          </li>
                                        ))}
                                      </ul>
                                    </div>
                                    {/* Optional: Add promotional content for categories with images */}
                                    {category.image_urls && category.image_urls.length > 0 && (
                                      <div className="d-none d-lg-block">
                                        <div className="d-none d-xl-block" style={{ width: "284px" }}></div>
                                        <div className="d-xl-none" style={{ width: "240px" }}></div>
                                        <div className="position-relative d-flex flex-column justify-content-center h-100 bg-body-secondary rounded-5 py-4 px-3">
                                          <div className="text-center px-2">
                                            <span className="badge bg-danger bg-opacity-10 text-danger fs-sm rounded-pill mb-2">Featured</span>
                                            <div className="h2 mb-4">{category.name}</div>
                                          </div>
                                          <img src={category.image_urls[0]} width="252" alt={category.name} />
                                          <div className="text-center mt-4">
                                            <a className="btn btn-sm btn-primary stretched-link" href={`/categories/${category.slug}`}>Shop now</a>
                                          </div>
                                        </div>
                                      </div>
                                    )}
                                  </>
                                )}
                              </div>
                            </div>
                          </li>
                        ))}
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </header>
        </div>
      </div>
    </>
  );
};


const Categories = () => {
  const [categories, setCategories] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    const fetchCategories = async () => {
      try {
        const response = await CategoriesAxiosService.getCategories({
          include_products: false
        });
        setCategories(response.data.categories);
      } catch (err) {
        setError(err.message || 'Failed to fetch categories');
      } finally {
        setLoading(false);
      }
    };

    fetchCategories();
  }, []);

  // Get icon based on category name (you can customize this as needed)
  const getCategoryIcon = (categoryName) => {
    const icons = {
      'Services': 'ci-computer',
      'Home & Garden': 'ci-home',
      'Entertainment': 'ci-game',
      'Fashion & Accessories': 'ci-apparel',
      'Family': 'ci-heart',
      'Electronics': 'ci-powerbank',
      'Hobbies': 'ci-puzzle',
      'Classifieds': 'ci-tag',
      'Vehicles': 'ci-car',
      'Property': 'ci-building',
      'Apparrel': 'ci-apparel',
      'Office Supplies': 'ci-briefcase',
      'Free Stuffs': 'ci-gift',
      'IT': 'ci-server',
      'Automotive': 'ci-car',
      'Building & Trading': 'ci-hammer',
      'Childcare & Education': 'ci-book',
      'Classes & Courses': 'ci-notebook',
      'Recruitment': 'ci-users',
      'Fitness & Personal Training': 'ci-dumbbell',
      'Health & Beauty': 'ci-mirror',
      'Tax & Financial': 'ci-calculator',
      'Legal': 'ci-scale',
      'Landscaping & Gardening': 'ci-flower',
      'Manufacturing': 'ci-factory',
      'Weddings & Venues': 'ci-ring',
      'Printing': 'ci-printer',
      'Travel & Tours': 'ci-plane',
      'Rental': 'ci-home',
      'Repairs': 'ci-settings',
      'Tools': 'ci-tool',
      'Furniture': 'ci-sofa',
      'Household': 'ci-basket',
      'Garden': 'ci-grass',
      'Appliances': 'ci-fridge',
      'Video Games': 'ci-gamepad',
      'Books': 'ci-book',
      'Movies & Music': 'ci-music',
      'Bags & Luggage': 'ci-bag',
      'Women\'s Clothing & Shoes': 'ci-dress',
      'Men\'s Clothing & Shoes': 'ci-tshirt',
      'Jewelry & Accessories': 'ci-jewelry',
      'Home Goods': 'ci-lamp',
      'Pets Supply': 'ci-paw',
      'Baby & Kids': 'ci-baby-carriage',
      'Toys & Games': 'ci-toy',
      'Electronics & Computers': 'ci-laptop',
      'Mobile Phones': 'ci-mobile',
      'Softwares': 'ci-software',
      'Power Supply': 'ci-bolt',
      'Bicycles': 'ci-bike',
      'Arts & Crafts': 'ci-palette',
      'Sports & Outdoors': 'ci-ball',
      'Auto parts': 'ci-car',
      'Musical Instruments': 'ci-mic',
      'Antiques & Collections': 'ci-collection',
      'Garage Sale': 'ci-tag',
      'Miscellaneous': 'ci-layers',
      'Industrial Cleaning': 'ci-clean',
      'Interior & Home Cleaning': 'ci-broom'
    };
    
    return icons[categoryName] || 'ci-layers';
  };

  // if (loading) {
  //   return <div className="text-center py-4">Loading categories...</div>;
  // }

  // if (error) {
  //   return <div className="text-center py-4 text-danger">Error: {error}</div>;
  // }

  return (
    <>
      <div className="offcanvas offcanvas-start d-flex h-100" id="SideCategory" tabIndex="-1" aria-labelledby="offcanvasLeftLabel"
        // style={{ paddingLeft: 0, overflowX: 'visible', display: 'flex', flexGrow:20, flexDirection: 'column', minWidth: '300px', maxWidth: '100%' }}
        style={{
          // width: 'auto',
          // minWidth: '300px',
          // maxWidth: '90vw',
          // overflow: 'visible'
        }}>

        <div className="offcanvas-header border-bottom">
          <h5 className="offcanvas-title" id="offcanvasLeftLabel">Browse Salessnet.</h5>
          <button className="btn-close" type="button" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>

        <div className="offcanvas-body py-3 py-lg-0" style={{ paddingLeft: 0, overflow: 'visible', display: 'flex'}}>
        {/* <div className="offcanvas-body py-3"> */}
          <header className="navbar navbar-expand-lg d-block z-fixed p-0" data-sticky-navbar="{&quot;offset&quot;: 500}">
            <div className="container px-0 px-lg-1">
              <div className="row">
                <div className="col-lg-6 col-12">
                {loading && (
          // <div className="d-flex justify-content-center align-items-center h-100">
          //   <div className="text-center py-4">
          //     <div className="spinner-border text-primary" role="status">
          //       <span className="visually-hidden">Loading...</span>
          //     </div>
          //     <p className="mt-2">Loading categories...</p>
          //   </div>
          // </div>
          <LoadingSpinner />
        ) }
         { error && (
          <div className="d-flex justify-content-center align-items-center h-100">
            <div className="text-center py-4 text-danger">
              <i className="ci-close-circle fs-3"></i>
              <p className="mt-2">Error: {error}</p>
              <button 
                className="btn btn-sm btn-outline-primary mt-2"
                onClick={() => window.location.reload()}
              >
                Try Again
              </button>
            </div>
          </div>
        )}

                  <div className="navbar-nav">
                    <div className="dropdown w-100">
                      <ul className="dropdown-menu dropdown-menu-static w-100 rounded-bottom-4 py-1 p-lg-1 show" data-bs-popper="static">
                        {categories.map((category) => {
                          const hasChildren = category.children && category.children.length > 0;
                          
                          return (
                            <li className={`${hasChildren ? 'dropend position-static' : ''}`} key={category.id}>
                              {hasChildren ? (
                                <>
                                  <div className="position-relative rounded pt-2 pb-1 px-lg-2" data-bs-toggle="dropdown"
                                    data-bs-trigger="hover">
                                    <Link className="dropdown-item fw-medium stretched-link d-none d-lg-flex" to={`/categories/${category.slug}`}>
                                      <i className={`${getCategoryIcon(category.name)} fs-xl opacity-60 pe-1 me-2`}></i>
                                      <span className="text-truncate">{category.name}</span>
                                      <i className="ci-chevron-right fs-base ms-auto me-n1"></i>
                                    </Link>
                                    <div className="dropdown-item fw-medium text-wrap stretched-link d-lg-none">
                                      <i className={`${getCategoryIcon(category.name)} fs-xl opacity-60 pe-1 me-2`}></i>
                                      {category.name}
                                      <i className="ci-chevron-down fs-base ms-auto me-n1"></i>
                                    </div>
                                  </div>
                                  <div className="dropdown-menu rounded-4 p-4"
                                    style={{ top: "1rem", height: "calc(100% - .1875rem)", "--cz-dropdownpacer": ".3125rem", animation: "none" }}>
                                    <div className="d-flex flex-column flex-lg-row h-100 gap-4">
                                      <div style={{ minWidth: "194px" }}>
                                        <div className="d-flex w-100">
                                        <Link className="animate-underline animate-target d-inline h6 text-dark-emphasis text-decoration-none text-truncate"
                                            to={`/categories/${category.slug}`}>{category.name}</Link>
                                        </div>
                                        <ul className="nav flex-column gap-2 mt-n2">
                                          {category.children.map((child) => (
                                            <li className="d-flex w-100 pt-1" key={child.id}>
                                              <Link className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0"
                                                to={`/categories/${child.slug || child.id}`}>
                                                {child.name}
                                              </Link>
                                            </li>
                                          ))}
                                        </ul>
                                      </div>
                                      {category.image_urls && category.image_urls.length > 0 && (
                                        <div className="d-none d-lg-block">
                                          <div className="d-none d-xl-block" style={{ width: "284px" }}></div>
                                          <div className="d-xl-none" style={{ width: "240px" }}></div>
                                          <div className="position-relative d-flex flex-column justify-content-center h-100 bg-body-secondary rounded-5 py-4 px-3">
                                            <div className="text-center px-2">
                                              <span className="badge bg-danger bg-opacity-10 text-danger fs-sm rounded-pill mb-2">Featured</span>
                                              <div className="h2 mb-4">{category.name}</div>
                                            </div>
                                            <img src={category.image_urls[0]} width="252" alt={category.name} />
                                            <div className="text-center mt-4">
                                              <Link className="btn btn-sm btn-primary stretched-link" to={`/categories/${category.slug}`}>Shop now</Link>
                                            </div>
                                          </div>
                                        </div>
                                      )}
                                    </div>
                                  </div>
                                </>
                              ) : (
                                <Link className="dropdown-item fw-medium" to={`/categories/${category.slug}`}>
                                  <i className={`${getCategoryIcon(category.name)} fs-xl opacity-60 pe-1 me-2`}></i>
                                  <span className="text-truncate">{category.name}</span>
                                </Link>
                              )}
                            </li>
                          );
                        })}
                      </ul>
                    </div>
                  </div>
                
                </div>
              </div>
            </div>
          </header>
        </div>
      </div>
    </>
  );
};

// 

const Categories8 = () => {
  const [categories, setCategories] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    const fetchCategories = async () => {
      try {
        const response = await CategoriesAxiosService.getCategories({
          include_products: false
        });
        setCategories(response.data.categories);
      } catch (err) {
        setError(err.message || 'Failed to fetch categories');
      } finally {
        setLoading(false);
      }
    };

    fetchCategories();
  }, []);

  // Get icon based on category name
  const getCategoryIcon = (categoryName) => {
    // ... (keep your existing icon mapping function)
    const icons = {
      'Services': 'ci-computer',
      'Home & Garden': 'ci-home',
      'Entertainment': 'ci-game',
      'Fashion & Accessories': 'ci-apparel',
      'Family': 'ci-heart',
      'Electronics': 'ci-powerbank',
      'Hobbies': 'ci-puzzle',
      'Classifieds': 'ci-tag',
      'Vehicles': 'ci-car',
      'Property': 'ci-building',
      'Apparrel': 'ci-apparel',
      'Office Supplies': 'ci-briefcase',
      'Free Stuffs': 'ci-gift',
      'IT': 'ci-server',
      'Automotive': 'ci-car',
      'Building & Trading': 'ci-hammer',
      'Childcare & Education': 'ci-book',
      'Classes & Courses': 'ci-notebook',
      'Recruitment': 'ci-users',
      'Fitness & Personal Training': 'ci-dumbbell',
      'Health & Beauty': 'ci-mirror',
      'Tax & Financial': 'ci-calculator',
      'Legal': 'ci-scale',
      'Landscaping & Gardening': 'ci-flower',
      'Manufacturing': 'ci-factory',
      'Weddings & Venues': 'ci-ring',
      'Printing': 'ci-printer',
      'Travel & Tours': 'ci-plane',
      'Rental': 'ci-home',
      'Repairs': 'ci-settings',
      'Tools': 'ci-tool',
      'Furniture': 'ci-sofa',
      'Household': 'ci-basket',
      'Garden': 'ci-grass',
      'Appliances': 'ci-fridge',
      'Video Games': 'ci-gamepad',
      'Books': 'ci-book',
      'Movies & Music': 'ci-music',
      'Bags & Luggage': 'ci-bag',
      'Women\'s Clothing & Shoes': 'ci-dress',
      'Men\'s Clothing & Shoes': 'ci-tshirt',
      'Jewelry & Accessories': 'ci-jewelry',
      'Home Goods': 'ci-lamp',
      'Pets Supply': 'ci-paw',
      'Baby & Kids': 'ci-baby-carriage',
      'Toys & Games': 'ci-toy',
      'Electronics & Computers': 'ci-laptop',
      'Mobile Phones': 'ci-mobile',
      'Softwares': 'ci-software',
      'Power Supply': 'ci-bolt',
      'Bicycles': 'ci-bike',
      'Arts & Crafts': 'ci-palette',
      'Sports & Outdoors': 'ci-ball',
      'Auto parts': 'ci-car',
      'Musical Instruments': 'ci-mic',
      'Antiques & Collections': 'ci-collection',
      'Garage Sale': 'ci-tag',
      'Miscellaneous': 'ci-layers',
      'Industrial Cleaning': 'ci-clean',
      'Interior & Home Cleaning': 'ci-broom'
    };

    return icons[categoryName] || 'ci-layers';
  };

  if (loading) return <div className="text-center py-4">Loading categories...</div>;
  if (error) return <div className="text-center py-4 text-danger">Error: {error}</div>;

  return (
    <div 
      className="offcanvas offcanvas-start d-flex h-100" 
      id="SideCategory" 
      tabIndex="-1" 
      aria-labelledby="offcanvasLeftLabel"
      style={{ 
        paddingLeft: 0, 
        overflow: 'visible', // Changed from overflowX
        display: 'flex', 
        flexDirection: 'column', 
        minWidth: '300px',
        width: 'auto', // Allow width to grow
        maxWidth: '90vw' // Limit maximum width
      }}
    >
      <div className="offcanvas-header border-bottom">
        <h5 className="offcanvas-title" id="offcanvasLeftLabel">Browse Salessnet.</h5>
        <button className="btn-close" type="button" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>

      <div 
        className="offcanvas-body py-3 py-lg-0" 
        style={{ 
          paddingLeft: 0, 
          overflow: 'visible', // Changed from overflowX
          display: 'flex', 
          flexDirection: 'column',
          flexGrow: 1
        }}
      >
        <header className="navbar navbar-expand-lg d-block z-fixed p-0">
          <div className="container-fluid px-0"> {/* Changed to container-fluid */}
            <div className="row">
              <div className="col-12">
                <div className="navbar-nav">
                  <div className="dropdown w-100">
                    <ul className="dropdown-menu dropdown-menu-static w-100 rounded-bottom-4 py-1 p-lg-1 show">
                      {categories.map((category) => {
                        const hasChildren = category.children?.length > 0;
                        
                        return (
                          <li 
                            className={`${hasChildren ? 'dropend position-static' : ''}`} 
                            key={category.id}
                          >
                            {hasChildren ? (
                              <>
                                <div 
                                  className="position-relative rounded pt-2 pb-1 px-lg-2" 
                                  data-bs-toggle="dropdown"
                                  data-bs-trigger="hover"
                                >
                                  <a className="dropdown-item fw-medium stretched-link d-none d-lg-flex" href={`/categories/${category.slug}`}>
                                    <i className={`${getCategoryIcon(category.name)} fs-xl opacity-60 pe-1 me-2`}></i>
                                    <span className="text-truncate">{category.name}</span>
                                    <i className="ci-chevron-right fs-base ms-auto me-n1"></i>
                                  </a>
                                  <div className="dropdown-item fw-medium text-wrap stretched-link d-lg-none">
                                    <i className={`${getCategoryIcon(category.name)} fs-xl opacity-60 pe-1 me-2`}></i>
                                    {category.name}
                                    <i className="ci-chevron-down fs-base ms-auto me-n1"></i>
                                  </div>
                                </div>
                                <div 
                                  className="dropdown-menu rounded-4 p-4"
                                  style={{ 
                                    top: "1rem", 
                                    minHeight: "100%",
                                    maxHeight: "80vh",
                                    overflowY: "auto",
                                    "--cz-dropdownpacer": ".3125rem", 
                                    animation: "none",
                                    width: "auto",
                                    minWidth: "300px",
                                    maxWidth: "min(80vw, 1200px)",
                                    display: "flex",
                                    flexDirection: "column"
                                  }}
                                >
                                  <div 
                                    className="d-flex flex-column flex-lg-row flex-wrap h-100 gap-4"
                                    style={{
                                      flex: "1 1 auto",
                                      overflow: "visible"
                                    }}
                                  >
                                    <div style={{ minWidth: "194px", flex: "1 1 auto" }}>
                                      <div className="d-flex w-100">
                                        <a className="animate-underline animate-target d-inline h6 text-dark-emphasis text-decoration-none text-truncate"
                                          href={`/categories/${category.slug}`}>{category.name}</a>
                                      </div>
                                      <ul className="nav flex-column gap-2 mt-n2">
                                        {category.children.map((child) => (
                                          <li className="d-flex w-100 pt-1" key={child.id}>
                                            <a className="nav-link animate-underline animate-target d-inline fw-normal text-truncate p-0"
                                              href={`/categories/${child.slug || child.id}`}>
                                              {child.name}
                                            </a>
                                          </li>
                                        ))}
                                      </ul>
                                    </div>
                                    {category.image_urls?.length > 0 && (
                                      <div className="d-none d-lg-block" style={{ flex: "0 0 auto" }}>
                                        <div className="position-relative d-flex flex-column justify-content-center h-100 bg-body-secondary rounded-5 py-4 px-3">
                                          <div className="text-center px-2">
                                            <span className="badge bg-danger bg-opacity-10 text-danger fs-sm rounded-pill mb-2">Featured</span>
                                            <div className="h2 mb-4">{category.name}</div>
                                          </div>
                                          <img 
                                            src={category.image_urls[0]} 
                                            width="252" 
                                            alt={category.name} 
                                            style={{ maxWidth: "100%", height: "auto" }}
                                          />
                                          <div className="text-center mt-4">
                                            <a className="btn btn-sm btn-primary stretched-link" href={`/categories/${category.slug}`}>Shop now</a>
                                          </div>
                                        </div>
                                      </div>
                                    )}
                                  </div>
                                </div>
                              </>
                            ) : (
                              <a className="dropdown-item fw-medium" href={`/categories/${category.slug}`}>
                                <i className={`${getCategoryIcon(category.name)} fs-xl opacity-60 pe-1 me-2`}></i>
                                <span className="text-truncate">{category.name}</span>
                              </a>
                            )}
                          </li>
                        );
                      })}
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </header>
      </div>
    </div>
  );
};

export default Categories;
